<!DOCTYPE html><html class="no-js"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Prestigos SDK documentation</title><meta name="description" content=""><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="shortcut icon" href="favicon.png"><link rel="stylesheet" href="css/styles.css"></head><body><header role="banner" class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="#home" class="navbar-brand">PRESTIGOS</a></div><nav role="navigation" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="https://github.com/prestigos/prestigos-sdk.js">@Github</a></li></ul></nav></div></header><h2 id="about">Prestigos SDK</h2><p>The project is hosted on <a href="#not-yet">GitHub</a>.</p>
<p>You can report bugs and discuss features on the <a href="#not-yet">issues page</a></p>
<h2 id="installation">Installation</h2><p>The prestigos-sdk.js is available as an <a href="#not-yet">npm module</a>.</p>
<h2 id="connection">Create a connection to Prestigos</h2><p>To create an instance, it&#39;s necesary to require the module. That module is a function, and should be called like this:</p>
<pre><code class="language-javascript">var prestigos = require(&#39;prestigos-sdk&#39;)({
  hash      : &#39;your-token&#39;,
  username  : &#39;your-username&#39;,
  group     : &#39;your-group&#39;
});
</code></pre>
<p>The returned object is a <strong>Prestigos connection</strong> instance, where all the methods to access Prestigos are available.</p>
<h2 id="methods">Methods</h2><p>Each connection has the following methods:</p><section id="userEntitiesCreate"><h3 id="userEntitiesCreate">userEntitiesCreate
  <code>prestigos.userEntitiesCreate(options)</code>
</h3>

<p>Create a user entity.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>username</td>
<td>string</td>
<td><em>[optional]</em><br>The desired username</td>
</tr>
<tr>
<td>registry</td>
<td>integer</td>
<td>The id of the registry</td>
</tr>
<tr>
<td>legal</td>
<td>string</td>
<td>The legal id</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>The name or names</td>
</tr>
<tr>
<td>lastname</td>
<td>string</td>
<td>The last name</td>
</tr>
<tr>
<td>lastname2</td>
<td>string</td>
<td><em>[optional]</em><br>Additional field for last name</td>
</tr>
<tr>
<td>birthday</td>
<td>string / date</td>
<td>The date of birth, as a Date object, or a string in the format YYYY-MM-DD</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td><em>[optional]</em><br>The phone number</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td><em>[optional]</em><br>Email address</td>
</tr>
<tr>
<td>sex</td>
<td>string</td>
<td>The sex, passed as M for male or F for female</td>
</tr>
<tr>
<td>tags</td>
<td>array</td>
<td><em>[optional]</em><br>Default tags for this entity. Each element of the array must be the id of the tag.</td>
</tr>
<tr>
<td>address</td>
<td>object</td>
<td><em>[optional]</em><br>The current address of the entity. Each property must contain an string.</td>
</tr>
<tr>
<td>extra</td>
<td>object</td>
<td><em>[optional]</em><br>Additional fields that the group can add. Each property must contain an string.</td>
</tr>
</tbody>
</table>
<pre><code class="language-javascript">prestigos.userEntitiesCreate({
  legal     : &#39;EAGM0000000990&#39;,
  name      : &#39;maah&#39;,
  lastname  : &#39;tyl&#39;,
  lastname2 : &#39;eel&#39;,
  sex       : &#39;m&#39;,
  registry  : 1,
  group     : &#39;some-gruop-id&#39;,
  birthday  : new Date(&#39;1995-01-01&#39;)
}).then(...);
</code></pre>
</section><section id="userEntitiesEdit"><h3 id="userEntitiesCreate">userEntitiesEdit
  <code>prestigos.userEntitiesEdit(options)</code>
</h3>

<p>Edit a user entity.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>The id of the user entity</td>
</tr>
<tr>
<td>registry</td>
<td>integer</td>
<td>The id of the registry</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td><em>[optional]</em><br>The phone number</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td><em>[optional]</em><br>Email address</td>
</tr>
<tr>
<td>tags</td>
<td>array</td>
<td><em>[optional]</em><br>Default tags for this entity. Each element of the array must be the id of the tag.</td>
</tr>
<tr>
<td>address</td>
<td>object</td>
<td><em>[optional]</em><br>The current address of the entity. Each property must contain an string.</td>
</tr>
<tr>
<td>extra</td>
<td>object</td>
<td><em>[optional]</em><br>Additional fields that the group can add. Each property must contain an string.</td>
</tr>
</tbody>
</table>
<pre><code class="language-javascript">prestigos.userEntitiesEdit({
  id        : &#39;a5a678bcde&#39;,
  registry  : 1,
  phone     : &#39;56961720&#39;,
  email     : &#39;user@someweb.com&#39;,
  tags      : [ &#39;aaaaabbbbbbccccc&#39;, &#39;cccccdddddeeee&#39; ]
}).then(...);
</code></pre>
</section><section id="userEntitiesRemove"><h3 id="userEntitiesCreate">userEntitiesRemove
  <code>prestigos.userEntitiesRemove(options)</code>
</h3>

<p>Delete a user entity.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>The id of the user entity</td>
</tr>
<tr>
<td>registry</td>
<td>integer</td>
<td>The id of the registry</td>
</tr>
</tbody>
</table>
<pre><code class="language-javascript">prestigos.userEntitiesRemove({
  id        : &#39;a5a678bcde&#39;,
  registry  : 1
}).then(...);
</code></pre>
</section><section id="eventsCreate"><h3 id="eventsCreate">eventsCreate
  <code>prestigos.eventsCreate(events)</code>
</h3>

<p>Create an event or a series of events.</p>
<p>The passed argument is an array contaning objects, each object containing the properties of an event.
It&#39;s also possible to just pass one object, containing one event.</p>
<p>The properties accepted for an event are the following:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>entity</td>
<td>string</td>
<td>The id of the entity that commited the event.</td>
</tr>
<tr>
<td>kpi</td>
<td>string</td>
<td>The id of the KPI of the event.</td>
</tr>
<tr>
<td>registry</td>
<td>integer</td>
<td>The id of the registry of the event.</td>
</tr>
<tr>
<td>event_date</td>
<td>string / date</td>
<td>The DateTime of the event.<br>It can be a JavaScript Date object, or an string, in <strong>ISO 8601</strong> format.<br>If the time part is omited, it assumes the time as <code>12:00:00</code></td>
</tr>
<tr>
<td>quantity</td>
<td>integer</td>
<td><em>[optional]</em><br>The quantity property of the event. It must be an integer of value 1 or higher.<br>Default value: 1</td>
</tr>
<tr>
<td>amount</td>
<td>number</td>
<td><em>[optional]</em><br>The monetary amount the event had. It must be an number of value 0 or higher.<br>Default value: 0</td>
</tr>
<tr>
<td>comment</td>
<td>string</td>
<td><em>[optional]</em><br> An string containing a comment about the event.</td>
</tr>
<tr>
<td>duration</td>
<td>integer</td>
<td><em>[optional]</em><br> The duration of the event, in seconds.</td>
</tr>
<tr>
<td>geo</td>
<td>object</td>
<td><em>[optional]</em><br> The longitude and latitude where the event occured. It must be an object containing the 2 properties <code>lon</code> and <code>lat</code> passed as numbers.<br>Like this: <code>&quot;geo&quot; : { &quot;lon&quot; : 37.769573, &quot;lat&quot; : -122.483123 }</code></td>
</tr>
<tr>
<td>tags</td>
<td>array</td>
<td><em>[optional]</em><br> Array containing the ids of the tags of the event.</td>
</tr>
</tbody>
</table>
<pre><code class="language-javascript">var events = [
  {
    entity        : &#39;aaabbbccc&#39;,
    event_date    : new Date(&#39;2015-01-01&#39;),
    registry      : 1,
    tags          : [ &#39;b281555ef6ecc6&#39; ],
    kpi           : &#39;ggggccccc&#39;
  },
  {
    entity        : &#39;eeefffggg&#39;,
    event_date    : new Date(&#39;2015-02-10&#39;),
    registry      : 2,
    comment       : &#39;This is a comment&#39;,
    kpi           : &#39;99g9g9g99&#39;
  }
];
prestigos.eventsCreate(events).then(....);
</code></pre>
</section><section id="queriesExecute"><h3 id="queriesExecute">queriesExecute
  <code>prestigos.queriesExecute(options)</code>
</h3>

<p>Execute a query using the passed options.</p>
<p>The argument is an object with the following properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>registry</td>
<td>integer</td>
<td>The id of the registry to use the query with.</td>
</tr>
<tr>
<td>query</td>
<td>string</td>
<td><em>[optional]</em><br> The id of the query.<br>If <code>cluster</code> is <code>true</code>, it will be ignored and set to the default value.<br>Default value is <code>_default</code>, which is the id of the default query.</td>
</tr>
<tr>
<td>cluster</td>
<td>boolean</td>
<td><em>[optional]</em><br> Boolean to show the <code>_default</code> query of the cluster. If is set to <code>true</code>, it will ignore the <code>query</code> and <code>entity</code> properties.<br>Default value is <code>false</code>.</td>
</tr>
<tr>
<td>entity</td>
<td>string</td>
<td><em>[optional]</em><br> Pass the id of an entity to show the query applied only to that entity. If is undefined, it will show the result to all the entities. This property is ignored if <code>cluster</code> is <code>true</code>.<br>Default value is <code>undefined</code></td>
</tr>
<tr>
<td>kpi</td>
<td>string</td>
<td><em>[optional]</em><br> Pass the id of a KPI to show the query applied only to that KPI. If is undefined, it will show the data of the complete registry.<br>Default value is <code>undefined</code></td>
</tr>
<tr>
<td>months</td>
<td>array</td>
<td><em>[optional]</em><br> A list to show only the desired months, each month should be an string in the format <code>YYYY-MM</code>. Example: <code>[&quot;2015-01&quot;,&quot;2015-02&quot;,&quot;2015-05&quot;]</code>.<br>Default value is <code>undefined</code></td>
</tr>
<tr>
<td>includeDocs</td>
<td>boolean</td>
<td><em>[optional]</em><br> If true, it will return each document in the list.<br>Default value is <code>false</code></td>
</tr>
<tr>
<td>editable</td>
<td>boolean</td>
<td><em>[optional]</em><br> If true, it will show only the editable events.</td>
</tr>
</tbody>
</table>
<pre><code class="language-javascript">// Process &quot;myquery&quot;, and return the total of the entire time
// of every user entity from registry 1
prestigos.queriesExecute({
  query         : &#39;myquery&#39;,
  registry      : 1,
  total         : true
}).then(...);

// Process &quot;myquery&quot;, and return the total per month of every user entity
// from the kpi &quot;aaaabbbccc&quot; for 3 january months of 3 different years
prestigos.queriesExecute({
  kpi           : &#39;aaaabbbccc&#39;,
  months        : [ &#39;2014-01&#39;, &#39;2015-01&#39;, &#39;2016-01&#39; ],
  query         : &#39;myquery&#39;,
  registry      : 1,
  total         : true
}).then(...);

// Process &quot;myquery&quot;, and return every event from the user entity &quot;eafadaea&quot; from registry 1
prestigos.queriesExecute({
  entity        : &#39;eafadaea&#39;,
  include_docs  : true,
  kpi           : &#39;aaaabbbccc&#39;,
  query         : &#39;myquery&#39;,
  registry      : 1
}).then(...);
</code></pre>
</section><h2 id="license">License</h2><p>Double licensed as MIT and BSD</p><script src="js/main.min.js"></script></body></html>